{"ast":null,"code":"var _jsxFileName = \"/Users/creator/Documents/projects/Israel-project/client/src/shared/ui/List/ui/List.tsx\",\n  _s = $RefreshSig$();\nimport { useCallback, useMemo, useRef } from 'react';\nimport cn from 'classnames';\nimport styles from './List.module.scss';\n\n/**\n * For extention props child components\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const List = props => {\n  _s();\n  const {\n    className,\n    data = [],\n    itemContentRender,\n    isLoading,\n    hasMore,\n    onScrollEnd\n  } = props;\n  const observer = useRef();\n  const lastElementRef = useCallback(node => {\n    if (isLoading) return;\n    if (observer.current) observer.current.disconnect();\n    observer.current = new IntersectionObserver(_ref => {\n      let [entity] = _ref;\n      if (entity.isIntersecting && onScrollEnd && hasMore) {\n        onScrollEnd();\n        console.log('last element is visible');\n      }\n    });\n    if (node) {\n      observer.current.observe(node);\n    }\n  }, [hasMore, isLoading, onScrollEnd]);\n  const content = useMemo(() => data.map((itemData, index) => {\n    if (data.length === index + 1) {\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        className: styles.listItem,\n        ref: lastElementRef,\n        children: itemContentRender(itemData)\n      }, itemData.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"li\", {\n      className: styles.listItem,\n      children: itemContentRender(itemData)\n    }, itemData.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this);\n  }), [data, itemContentRender, lastElementRef]);\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    className: cn([styles.list, className]),\n    children: content\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n_s(List, \"6NpGig30dZ1mMpCUMcKTEYEZ1GA=\");\n_c = List;\nvar _c;\n$RefreshReg$(_c, \"List\");","map":{"version":3,"names":["useCallback","useMemo","useRef","cn","styles","jsxDEV","_jsxDEV","List","props","_s","className","data","itemContentRender","isLoading","hasMore","onScrollEnd","observer","lastElementRef","node","current","disconnect","IntersectionObserver","_ref","entity","isIntersecting","console","log","observe","content","map","itemData","index","length","listItem","ref","children","id","fileName","_jsxFileName","lineNumber","columnNumber","list","_c","$RefreshReg$"],"sources":["/Users/creator/Documents/projects/Israel-project/client/src/shared/ui/List/ui/List.tsx"],"sourcesContent":["import { ReactNode, useCallback, useMemo, useRef } from 'react';\nimport cn from 'classnames';\nimport styles from './List.module.scss';\n\ninterface IItemId {\n  id: number | string;\n}\n\n/**\n * For extention props child components\n */\nexport interface IListPropsExtension<D> {\n  className?: string;\n  isLoading?: boolean;\n  hasMore?: boolean;\n  data?: D[];\n  onScrollEnd?: () => void;\n}\n\ninterface IListProps<D> extends IListPropsExtension<D> {\n  itemContentRender: (data: D) => ReactNode;\n}\n\nexport const List = <D extends IItemId>(props: IListProps<D>) => {\n  const {\n    className,\n    data = [],\n    itemContentRender,\n    isLoading,\n    hasMore,\n    onScrollEnd\n  } = props;\n  const observer = useRef<IntersectionObserver>();\n\n  const lastElementRef = useCallback((node: HTMLLIElement) => {\n    if (isLoading) return;\n    if (observer.current) observer.current.disconnect();\n    observer.current = new IntersectionObserver(([entity]) => {\n      if (entity.isIntersecting && onScrollEnd && hasMore) {\n        onScrollEnd();\n        console.log('last element is visible')\n      }\n    })\n    if (node) {\n      observer.current.observe(node)\n    }\n  }, [hasMore, isLoading, onScrollEnd])\n\n  const content = useMemo(() => data.map((itemData, index) => {\n    if (data.length === index + 1) {\n      return (\n        <li\n          className={styles.listItem}\n          key={itemData.id}\n          ref={lastElementRef}>\n            {itemContentRender(itemData)}\n        </li>\n      );\n    }\n    return (\n      <li className={styles.listItem} key={itemData.id}>\n        {itemContentRender(itemData)}\n      </li>\n    );\n  }), [data, itemContentRender, lastElementRef]);\n\n  return (\n    <ul className={cn([styles.list, className])}>\n      {content}\n    </ul>\n  );\n};\n"],"mappings":";;AAAA,SAAoBA,WAAW,EAAEC,OAAO,EAAEC,MAAM,QAAQ,OAAO;AAC/D,OAAOC,EAAE,MAAM,YAAY;AAC3B,OAAOC,MAAM,MAAM,oBAAoB;;AAMvC;AACA;AACA;AAFA,SAAAC,MAAA,IAAAC,OAAA;AAeA,OAAO,MAAMC,IAAI,GAAuBC,KAAoB,IAAK;EAAAC,EAAA;EAC/D,MAAM;IACJC,SAAS;IACTC,IAAI,GAAG,EAAE;IACTC,iBAAiB;IACjBC,SAAS;IACTC,OAAO;IACPC;EACF,CAAC,GAAGP,KAAK;EACT,MAAMQ,QAAQ,GAAGd,MAAM,CAAuB,CAAC;EAE/C,MAAMe,cAAc,GAAGjB,WAAW,CAAEkB,IAAmB,IAAK;IAC1D,IAAIL,SAAS,EAAE;IACf,IAAIG,QAAQ,CAACG,OAAO,EAAEH,QAAQ,CAACG,OAAO,CAACC,UAAU,CAAC,CAAC;IACnDJ,QAAQ,CAACG,OAAO,GAAG,IAAIE,oBAAoB,CAACC,IAAA,IAAc;MAAA,IAAb,CAACC,MAAM,CAAC,GAAAD,IAAA;MACnD,IAAIC,MAAM,CAACC,cAAc,IAAIT,WAAW,IAAID,OAAO,EAAE;QACnDC,WAAW,CAAC,CAAC;QACbU,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;MACxC;IACF,CAAC,CAAC;IACF,IAAIR,IAAI,EAAE;MACRF,QAAQ,CAACG,OAAO,CAACQ,OAAO,CAACT,IAAI,CAAC;IAChC;EACF,CAAC,EAAE,CAACJ,OAAO,EAAED,SAAS,EAAEE,WAAW,CAAC,CAAC;EAErC,MAAMa,OAAO,GAAG3B,OAAO,CAAC,MAAMU,IAAI,CAACkB,GAAG,CAAC,CAACC,QAAQ,EAAEC,KAAK,KAAK;IAC1D,IAAIpB,IAAI,CAACqB,MAAM,KAAKD,KAAK,GAAG,CAAC,EAAE;MAC7B,oBACEzB,OAAA;QACEI,SAAS,EAAEN,MAAM,CAAC6B,QAAS;QAE3BC,GAAG,EAAEjB,cAAe;QAAAkB,QAAA,EACjBvB,iBAAiB,CAACkB,QAAQ;MAAC,GAFzBA,QAAQ,CAACM,EAAE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAGd,CAAC;IAET;IACA,oBACElC,OAAA;MAAII,SAAS,EAAEN,MAAM,CAAC6B,QAAS;MAAAE,QAAA,EAC5BvB,iBAAiB,CAACkB,QAAQ;IAAC,GADOA,QAAQ,CAACM,EAAE;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAE5C,CAAC;EAET,CAAC,CAAC,EAAE,CAAC7B,IAAI,EAAEC,iBAAiB,EAAEK,cAAc,CAAC,CAAC;EAE9C,oBACEX,OAAA;IAAII,SAAS,EAAEP,EAAE,CAAC,CAACC,MAAM,CAACqC,IAAI,EAAE/B,SAAS,CAAC,CAAE;IAAAyB,QAAA,EACzCP;EAAO;IAAAS,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAET,CAAC;AAAC/B,EAAA,CAhDWF,IAAI;AAAAmC,EAAA,GAAJnC,IAAI;AAAA,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}